"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(c){var a=c(".navbar").innerHeight();function i(e){e=(e=void 0===e||"object"===_typeof(e)?window.location.hash:e).replace(/:/g,"\\:"),c(e).length&&(c("body").addClass("scrolling"),c("html, body").animate({scrollTop:c(e).offset().top-a},600,function(){c("body").removeClass("scrolling")}))}function t(){var e=c("body"),t=e.data("bs.scrollspy");t&&(t._config.offset=a,e.data("bs.scrollspy",t),e.scrollspy("refresh"))}window.addEventListener("hashchange",i),c("#navbar-main li.nav-item a.nav-link").on("click",function(e){var t=this.hash;t&&c(t).length&&0<c("#homepage").length&&(e.preventDefault(),c("html, body").animate({scrollTop:c(t).offset().top-a},800))}),c("#back_to_top").on("click",function(e){e.preventDefault(),c("html, body").animate({scrollTop:0},800,function(){window.location.hash=""})}),c(document).on("click",".navbar-collapse.show",function(e){var t=c(e.target).is("a")?c(e.target):c(e.target).parent();t.is("a")&&"dropdown-toggle"!=t.attr("class")&&c(this).collapse("hide")});var o,n,s={},r=c("#container-publications");r.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"},filter:function(){var e=c(this),t=!o||e.text().match(o),a=!n||e.is(n);return t&&a}});var l,d,p,e=c(".filter-search").keyup((l=function(){o=new RegExp(e.val(),"gi"),r.isotope()},d=d||100,function(){clearTimeout(p);var e=arguments,t=this;p=setTimeout(function(){l.apply(t,e)},d)}));function h(e){var t="";for(var a in e)t+=e[a];return t}function u(){c("body").hasClass("searching")?(c("[id=search-query]").blur(),c("body").removeClass("searching")):(c("body").addClass("searching"),c(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),c("#search-query").focus())}c(".pub-filters").on("change",function(){var e=c(this)[0].getAttribute("data-filter-group");if(s[e]=this.value,n=h(s),r.isotope(),"pubtype"==e){var t=c(this).val();".pubtype-"==t.substr(0,9)?window.location.hash=t.substr(9):window.location.hash=""}}),c(document).ready(function(){var e=0;c("body").hasClass("dark")&&(e=1);var t=parseInt(localStorage.getItem("dark_mode")||e),a=0<c("link[title=hl-light]").length,o=c("link[title=hl-light]")[0],n=c("link[title=hl-dark]")[0];t?(c("body").addClass("dark"),a&&(o.disabled=!0,n.disabled=!1),c(".js-dark-toggle i").removeClass("fa-moon").addClass("fa-sun")):(c("body").removeClass("dark"),a&&(o.disabled=!1,n.disabled=!0),c(".js-dark-toggle i").removeClass("fa-sun").addClass("fa-moon")),c(".js-dark-toggle").click(function(e){e.preventDefault(),function(e,t,a){c("body").hasClass("dark")?(c("body").css({opacity:0,visibility:"visible"}).animate({opacity:1},500),c("body").removeClass("dark"),e&&(t.disabled=!1,a.disabled=!0),c(".js-dark-toggle i").removeClass("fa-sun").addClass("fa-moon"),localStorage.setItem("dark_mode","0")):(c("body").css({opacity:0,visibility:"visible"}).animate({opacity:1},500),c("body").addClass("dark"),e&&(t.disabled=!0,a.disabled=!1),c(".js-dark-toggle i").removeClass("fa-moon").addClass("fa-sun"),localStorage.setItem("dark_mode","1"))}(a,o,n)})}),c(window).on("load",function(){var e;window.location.hash&&("#top"==window.location.hash?window.location.hash="":c(".projects-container").length||i()),c("body").scrollspy({offset:a}),c(window).resize(function(){clearTimeout(e),e=setTimeout(t,200)}),c(".projects-container").each(function(e,t){var a,o=c(t),n=o.closest("section");a=n.find(".isotope").hasClass("js-layout-row")?"fitRows":"masonry",o.imagesLoaded(function(){o.isotope({itemSelector:".isotope-item",layoutMode:a,masonry:{gutter:20},filter:n.find(".default-project-filter").text()}),n.find(".project-filters a").click(function(){var e=c(this).attr("data-filter");return o.isotope({filter:e}),c(this).removeClass("active").addClass("active").siblings().removeClass("active all"),!1}),window.location.hash&&i()})}),c(".pub-filters-select")&&function(){var e=window.location.hash.replace("#",""),t="*";""==e||isNaN(e)||(t=".pubtype-"+e),s.pubtype=t,n=h(s),r.isotope(),c(".pubtype-select").val(t)}(),c(".js-cite-modal").click(function(e){e.preventDefault();var o=c(this).attr("data-filename"),t=c("#modal");t.find(".modal-body code").load(o,function(e,t,a){if("error"==t){c("#modal-error").html("Error: "+a.status+" "+a.statusText)}else c(".js-download-cite").attr("href",o)}),t.modal("show")}),c(".js-copy-cite").click(function(e){e.preventDefault();var t=document.createRange(),a=document.querySelector("#modal .modal-body");t.selectNode(a),window.getSelection().addRange(t);try{document.execCommand("copy")}catch(e){console.log("Error: citation copy failed.")}window.getSelection().removeRange(t)}),function(){if(c("#map").length){var e=c("#map-provider").val(),t=c("#map-lat").val(),a=c("#map-lng").val(),o=parseInt(c("#map-zoom").val()),n=c("#map-dir").val(),i=c("#map-api-key").val();if(1==e){new GMaps({div:"#map",lat:t,lng:a,zoom:o,zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!0,draggable:!0}).addMarker({lat:t,lng:a,click:function(){var e="https://www.google.com/maps/place/"+encodeURIComponent(n)+"/@"+t+","+a+"/";window.open(e,"_blank")},title:n})}else{var s=new L.map("map").setView([t,a],o);3==e&&i.length?L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:i}).addTo(s):L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(s);var r=L.marker([t,a]).addTo(s),l=t+","+a+"#map="+o+"/"+t+"/"+a+"&layers=N";r.bindPopup(n+'<p><a href="https://www.openstreetmap.org/directions?engine=osrm_car&route='+l+'">Routing via OpenStreetMap</a></p>')}}}(),c("#TableOfContents > ul > li > ul").unwrap().unwrap(),0<c("#academic-release").length&&function(a,e){c.getJSON("https://api.github.com/repos/"+e+"/tags").done(function(e){var t=e[0];c(a).append(t.name)}).fail(function(e,t,a){var o=t+", "+a;console.log("Request Failed: "+o)})}("#academic-release",c("#academic-release").data("repo")),c(".js-search").click(function(e){e.preventDefault(),u()}),c(document).on("keydown",function(e){27==e.which?c("body").hasClass("searching")&&u():191!=e.which||0!=e.shiftKey||c("input,textarea").is(":focus")||(e.preventDefault(),u())})})}(jQuery);var fuseOptions={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"authors",weight:.5},{name:"content",weight:.2},{name:"tags",weight:.5},{name:"categories",weight:.5}]},summaryLength=60;function getSearchQuery(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function updateURL(e){history.pushState&&window.history.pushState({path:e},"",e)}function initSearch(e,t){var a=$("#search-query").val();a.length<1&&$("#search-hits").empty(),!e&&a.length<fuseOptions.minMatchCharLength||($("#search-hits").empty(),searchAcademic(a,t),updateURL(window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+encodeURIComponent(a)+window.location.hash))}function searchAcademic(e,t){var a=t.search(e);0<a.length?($("#search-hits").append('<h3 class="mt-0">'+a.length+" "+i18n.results+"</h3>"),parseResults(e,a)):$("#search-hits").append('<div class="search-no-results">'+i18n.no_results+"</div>")}function parseResults(l,e){$.each(e,function(a,e){var n=e.item.content,i="",s=[];fuseOptions.tokenize?s.push(l):$.each(e.matches,function(e,t){if("content"==t.key){var a=0<t.indices[0][0]-summaryLength?t.indices[0][0]-summaryLength:0,o=t.indices[0][1]+summaryLength<n.length?t.indices[0][1]+summaryLength:n.length;i+=n.substring(a,o),s.push(t.value.substring(t.indices[0][0],t.indices[0][1]-t.indices[0][0]+1))}}),i.length<1&&(i+=n.substring(0,2*summaryLength));var t=$("#search-hit-fuse-template").html(),o=e.item.section;o in content_type&&(o=content_type[o]);var r=render(t,{key:a,title:e.item.title,type:o,relpermalink:e.item.relpermalink,snippet:i});$("#search-hits").append(r),$.each(s,function(e,t){$("#summary-"+a).mark(t)})})}function render(e,t){var a,o;for(a in t)o=new RegExp("\\{\\{\\s*"+a+"\\s*\\}\\}","g"),e=e.replace(o,t[a]);return e}"function"==typeof Fuse&&$.getJSON(search_index_filename,function(e){var t=new Fuse(e,fuseOptions);(query=getSearchQuery("q"))&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(query),$("#search-query").focus(),initSearch(!0,t)),$("#search-query").keyup(function(e){clearTimeout($.data(this,"searchTimer")),13==e.keyCode?initSearch(!0,t):$(this).data("searchTimer",setTimeout(function(){initSearch(!1,t)},250))})});